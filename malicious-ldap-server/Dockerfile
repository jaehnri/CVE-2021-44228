FROM maven:3-jdk-8-slim as build

COPY malicious-ldap-server/pom.xml pom.xml
COPY malicious-ldap-server/src src
RUN mvn clean package

FROM openjdk:8 as ldap
COPY --from=build target/malicious-ldap-server-*-jar-with-dependencies.jar /server.jar

EXPOSE 8000
EXPOSE 9999

CMD ["java", "-jar", "/server.jar"]

